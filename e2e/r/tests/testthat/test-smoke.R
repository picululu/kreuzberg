# Code generated by kreuzberg-e2e-generator. DO NOT EDIT.
# To regenerate: cargo run -p kreuzberg-e2e-generator -- generate --lang r
#
# Tests for smoke fixtures.
# nolint start

test_that("smoke_docx_basic", {
  result <- run_fixture(
    "smoke_docx_basic",
    "docx/fake.docx",
    NULL,
    requirements = character(0),
    notes = NULL,
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("application/vnd.openxmlformats-officedocument.wordprocessingml.document"))
  assert_min_content_length(result, 20L)
  assert_content_contains_any(result, c("Lorem", "ipsum", "document", "text"))
})

test_that("smoke_html_basic", {
  result <- run_fixture(
    "smoke_html_basic",
    "html/simple_table.html",
    NULL,
    requirements = character(0),
    notes = NULL,
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("text/html"))
  assert_min_content_length(result, 10L)
  assert_content_contains_any(result, c("#", "**", "simple", "HTML"))
})

test_that("smoke_image_png", {
  result <- run_fixture(
    "smoke_image_png",
    "images/sample.png",
    NULL,
    requirements = character(0),
    notes = "Image extraction requires image processing dependencies",
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("image/png"))
  assert_metadata_expectation(result, "format", "PNG")
})

test_that("smoke_json_basic", {
  result <- run_fixture(
    "smoke_json_basic",
    "json/simple.json",
    NULL,
    requirements = character(0),
    notes = NULL,
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("application/json"))
  assert_min_content_length(result, 5L)
})

test_that("smoke_pdf_basic", {
  result <- run_fixture(
    "smoke_pdf_basic",
    "pdf/fake_memo.pdf",
    NULL,
    requirements = character(0),
    notes = NULL,
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("application/pdf"))
  assert_min_content_length(result, 50L)
  assert_content_contains_any(result, c("May 5, 2023", "To Whom it May Concern"))
})

test_that("smoke_txt_basic", {
  result <- run_fixture(
    "smoke_txt_basic",
    "text/report.txt",
    NULL,
    requirements = character(0),
    notes = NULL,
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("text/plain"))
  assert_min_content_length(result, 5L)
})

test_that("smoke_xlsx_basic", {
  result <- run_fixture(
    "smoke_xlsx_basic",
    "xlsx/stanley_cups.xlsx",
    NULL,
    requirements = character(0),
    notes = NULL,
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"))
  assert_min_content_length(result, 100L)
  assert_content_contains_all(result, c("Team", "Location", "Stanley Cups", "Blues", "Flyers", "Maple Leafs", "STL", "PHI", "TOR"))
  assert_table_count(result, minimum = 1L, maximum = NULL)
  assert_metadata_expectation(result, "sheet_count", list(gte = 2L))
  assert_metadata_expectation(result, "sheet_names", list(contains = c("Stanley Cups")))
})
# nolint end
