# Code generated by kreuzberg-e2e-generator. DO NOT EDIT.
# To regenerate: cargo run -p kreuzberg-e2e-generator -- generate --lang r
#
# Tests for pdf fixtures.
# nolint start

test_that("pdf_annotations", {
  result <- run_fixture(
    "pdf_annotations",
    "pdf/test_article.pdf",
    list(pdf_options = list(extract_annotations = TRUE)),
    requirements = character(0),
    notes = "PDFium ARM Linux binary does not support annotation extraction",
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("application/pdf"))
  assert_annotations(result, has_annotations = TRUE, min_count = 1L)
})

test_that("pdf_assembly_technical", {
  result <- run_fixture(
    "pdf_assembly_technical",
    "pdf/assembly_language_for_beginners_al4_b_en.pdf",
    NULL,
    requirements = character(0),
    notes = NULL,
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("application/pdf"))
  assert_min_content_length(result, 5000L)
  assert_content_contains_any(result, c("assembly", "register", "instruction"))
  assert_metadata_expectation(result, "format_type", list(eq = "pdf"))
})

test_that("pdf_bayesian_data_analysis", {
  result <- run_fixture(
    "pdf_bayesian_data_analysis",
    "pdf/bayesian_data_analysis_third_edition_13th_feb_2020.pdf",
    NULL,
    requirements = character(0),
    notes = NULL,
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("application/pdf"))
  assert_min_content_length(result, 10000L)
  assert_content_contains_any(result, c("Bayesian", "probability", "distribution"))
  assert_metadata_expectation(result, "format_type", list(eq = "pdf"))
})

test_that("pdf_bounding_boxes", {
  skip_if_feature_unavailable("pdf")
  result <- run_fixture(
    "pdf_bounding_boxes",
    "pdf/tiny.pdf",
    list(images = list(extract_images = TRUE)),
    requirements = c("pdf"),
    notes = NULL,
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("application/pdf"))
  assert_min_content_length(result, 50L)
  assert_table_count(result, minimum = 1L, maximum = NULL)
  assert_table_bounding_boxes(result)
})

test_that("pdf_code_and_formula", {
  result <- run_fixture(
    "pdf_code_and_formula",
    "pdf/code_and_formula.pdf",
    NULL,
    requirements = character(0),
    notes = NULL,
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("application/pdf"))
  assert_min_content_length(result, 100L)
})

test_that("pdf_deep_learning", {
  result <- run_fixture(
    "pdf_deep_learning",
    "pdf/fundamentals_of_deep_learning_2014.pdf",
    NULL,
    requirements = character(0),
    notes = NULL,
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("application/pdf"))
  assert_min_content_length(result, 1000L)
  assert_content_contains_any(result, c("neural", "network", "deep learning"))
  assert_metadata_expectation(result, "format_type", list(eq = "pdf"))
})

test_that("pdf_embedded_images", {
  result <- run_fixture(
    "pdf_embedded_images",
    "pdf/embedded_images_tables.pdf",
    NULL,
    requirements = character(0),
    notes = NULL,
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("application/pdf"))
  assert_min_content_length(result, 50L)
  assert_table_count(result, minimum = 0L, maximum = NULL)
})

test_that("pdf_google_doc", {
  result <- run_fixture(
    "pdf_google_doc",
    "pdf/google_doc_document.pdf",
    NULL,
    requirements = character(0),
    notes = NULL,
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("application/pdf"))
  assert_min_content_length(result, 50L)
  assert_metadata_expectation(result, "format_type", list(eq = "pdf"))
})

test_that("pdf_large_ciml", {
  result <- run_fixture(
    "pdf_large_ciml",
    "pdf/a_course_in_machine_learning_ciml_v0_9_all.pdf",
    NULL,
    requirements = character(0),
    notes = NULL,
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("application/pdf"))
  assert_min_content_length(result, 10000L)
  assert_content_contains_any(result, c("machine learning", "algorithm", "training"))
  assert_metadata_expectation(result, "format_type", list(eq = "pdf"))
})

test_that("pdf_non_english_german", {
  result <- run_fixture(
    "pdf_non_english_german",
    "pdf/5_level_paging_and_5_level_ept_intel_revision_1_1_may_2017.pdf",
    NULL,
    requirements = character(0),
    notes = NULL,
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("application/pdf"))
  assert_min_content_length(result, 100L)
  assert_content_contains_any(result, c("Intel", "paging"))
  assert_metadata_expectation(result, "format_type", list(eq = "pdf"))
})

test_that("pdf_right_to_left", {
  result <- run_fixture(
    "pdf_right_to_left",
    "pdf/right_to_left_01.pdf",
    NULL,
    requirements = character(0),
    notes = NULL,
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("application/pdf"))
  assert_min_content_length(result, 50L)
  assert_metadata_expectation(result, "format_type", list(eq = "pdf"))
})

test_that("pdf_simple_text", {
  result <- run_fixture(
    "pdf_simple_text",
    "pdf/fake_memo.pdf",
    NULL,
    requirements = character(0),
    notes = NULL,
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("application/pdf"))
  assert_min_content_length(result, 50L)
  assert_content_contains_any(result, c("May 5, 2023", "To Whom it May Concern", "Mallori"))
})

test_that("pdf_tables_large", {
  result <- run_fixture(
    "pdf_tables_large",
    "pdf/large.pdf",
    NULL,
    requirements = character(0),
    notes = NULL,
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("application/pdf"))
  assert_min_content_length(result, 500L)
})

test_that("pdf_tables_medium", {
  result <- run_fixture(
    "pdf_tables_medium",
    "pdf/medium.pdf",
    NULL,
    requirements = character(0),
    notes = NULL,
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("application/pdf"))
  assert_min_content_length(result, 100L)
})

test_that("pdf_tables_small", {
  skip_if_feature_unavailable("ocr")
  result <- run_fixture(
    "pdf_tables_small",
    "pdf/tiny.pdf",
    NULL,
    requirements = c("ocr"),
    notes = "PDF table extraction requires OCR feature",
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("application/pdf"))
  assert_min_content_length(result, 50L)
  assert_content_contains_all(result, c("Table 1", "Selected Numbers", "Celsius", "Fahrenheit", "Water Freezing Point", "Water Boiling Point"))
  assert_table_count(result, minimum = 1L, maximum = NULL)
})

test_that("pdf_technical_stat_learning", {
  result <- run_fixture(
    "pdf_technical_stat_learning",
    "pdf/an_introduction_to_statistical_learning_with_applications_in_r_islr_sixth_printing.pdf",
    NULL,
    requirements = character(0),
    notes = NULL,
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("application/pdf"))
  assert_min_content_length(result, 10000L)
  assert_content_contains_any(result, c("statistical", "regression", "learning"))
  assert_metadata_expectation(result, "format_type", list(eq = "pdf"))
})
# nolint end
