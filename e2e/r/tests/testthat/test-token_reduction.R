# Code generated by kreuzberg-e2e-generator. DO NOT EDIT.
# To regenerate: cargo run -p kreuzberg-e2e-generator -- generate --lang r
#
# Tests for token_reduction fixtures.
# nolint start

test_that("token_reduction_aggressive", {
  result <- run_fixture(
    "token_reduction_aggressive",
    "pdf/fake_memo.pdf",
    list(token_reduction = list(mode = "aggressive")),
    requirements = character(0),
    notes = NULL,
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("application/pdf"))
  assert_min_content_length(result, 5L)
  assert_content_not_empty(result)
})

test_that("token_reduction_basic", {
  result <- run_fixture(
    "token_reduction_basic",
    "pdf/fake_memo.pdf",
    list(token_reduction = list(mode = "moderate")),
    requirements = character(0),
    notes = NULL,
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("application/pdf"))
  assert_min_content_length(result, 5L)
  assert_content_not_empty(result)
})

test_that("token_reduction_light", {
  result <- run_fixture(
    "token_reduction_light",
    "pdf/fake_memo.pdf",
    list(token_reduction = list(mode = "light")),
    requirements = character(0),
    notes = NULL,
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("application/pdf"))
  assert_min_content_length(result, 10L)
  assert_content_not_empty(result)
})

test_that("token_reduction_with_chunking", {
  result <- run_fixture(
    "token_reduction_with_chunking",
    "pdf/fake_memo.pdf",
    list(chunking = list(max_chars = 500L, max_overlap = 50L), token_reduction = list(mode = "moderate")),
    requirements = character(0),
    notes = NULL,
    skip_if_missing = TRUE
  )
  assert_expected_mime(result, c("application/pdf"))
  assert_min_content_length(result, 5L)
  assert_chunks(result, min_count = 1L, each_has_content = TRUE)
  assert_content_not_empty(result)
})
# nolint end
