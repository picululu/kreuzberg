/* Code generated by kreuzberg-e2e-generator. DO NOT EDIT. */
/* Category: pdf */

#include "helpers.h"
#include <stdio.h>

static void test_pdf_pdf_annotations(void) {
    CExtractionResult *result = run_extraction("pdf/test_article.pdf", "{\"pdf_options\":{\"extract_annotations\":true}}");
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/pdf"}, 1);
    assert_annotations(result, 1, 1, 1);
    kreuzberg_free_result(result);
}

static void test_pdf_pdf_assembly_technical(void) {
    CExtractionResult *result = run_extraction("pdf/assembly_language_for_beginners_al4_b_en.pdf", NULL);
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/pdf"}, 1);
    assert_min_content_length(result, 5000);
    assert_content_contains_any(result, (const char *[]){"assembly", "register", "instruction"}, 3);
    /* metadata assertion: format_type */
    if (result->metadata_json) { (void)str_contains_ci(result->metadata_json, "format_type"); (void)str_contains_ci(result->metadata_json, "{\"eq\":\"pdf\"}"); }
    kreuzberg_free_result(result);
}

static void test_pdf_pdf_bayesian_data_analysis(void) {
    CExtractionResult *result = run_extraction("pdf/bayesian_data_analysis_third_edition_13th_feb_2020.pdf", NULL);
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/pdf"}, 1);
    assert_min_content_length(result, 10000);
    assert_content_contains_any(result, (const char *[]){"Bayesian", "probability", "distribution"}, 3);
    /* metadata assertion: format_type */
    if (result->metadata_json) { (void)str_contains_ci(result->metadata_json, "format_type"); (void)str_contains_ci(result->metadata_json, "{\"eq\":\"pdf\"}"); }
    kreuzberg_free_result(result);
}

static void test_pdf_pdf_bounding_boxes(void) {
    if (skip_if_feature_unavailable("pdf")) return;
    CExtractionResult *result = run_extraction("pdf/tiny.pdf", "{\"images\":{\"extract_images\":true}}");
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/pdf"}, 1);
    assert_min_content_length(result, 50);
    assert_table_count(result, 1, 1, 0, 0);
    kreuzberg_free_result(result);
}

static void test_pdf_pdf_code_and_formula(void) {
    CExtractionResult *result = run_extraction("pdf/code_and_formula.pdf", NULL);
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/pdf"}, 1);
    assert_min_content_length(result, 100);
    kreuzberg_free_result(result);
}

static void test_pdf_pdf_deep_learning(void) {
    CExtractionResult *result = run_extraction("pdf/fundamentals_of_deep_learning_2014.pdf", NULL);
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/pdf"}, 1);
    assert_min_content_length(result, 1000);
    assert_content_contains_any(result, (const char *[]){"neural", "network", "deep learning"}, 3);
    /* metadata assertion: format_type */
    if (result->metadata_json) { (void)str_contains_ci(result->metadata_json, "format_type"); (void)str_contains_ci(result->metadata_json, "{\"eq\":\"pdf\"}"); }
    kreuzberg_free_result(result);
}

static void test_pdf_pdf_embedded_images(void) {
    CExtractionResult *result = run_extraction("pdf/embedded_images_tables.pdf", NULL);
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/pdf"}, 1);
    assert_min_content_length(result, 50);
    assert_table_count(result, 1, 0, 0, 0);
    kreuzberg_free_result(result);
}

static void test_pdf_pdf_google_doc(void) {
    CExtractionResult *result = run_extraction("pdf/google_doc_document.pdf", NULL);
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/pdf"}, 1);
    assert_min_content_length(result, 50);
    /* metadata assertion: format_type */
    if (result->metadata_json) { (void)str_contains_ci(result->metadata_json, "format_type"); (void)str_contains_ci(result->metadata_json, "{\"eq\":\"pdf\"}"); }
    kreuzberg_free_result(result);
}

static void test_pdf_pdf_large_ciml(void) {
    CExtractionResult *result = run_extraction("pdf/a_course_in_machine_learning_ciml_v0_9_all.pdf", NULL);
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/pdf"}, 1);
    assert_min_content_length(result, 10000);
    assert_content_contains_any(result, (const char *[]){"machine learning", "algorithm", "training"}, 3);
    /* metadata assertion: format_type */
    if (result->metadata_json) { (void)str_contains_ci(result->metadata_json, "format_type"); (void)str_contains_ci(result->metadata_json, "{\"eq\":\"pdf\"}"); }
    kreuzberg_free_result(result);
}

static void test_pdf_pdf_non_english_german(void) {
    CExtractionResult *result = run_extraction("pdf/5_level_paging_and_5_level_ept_intel_revision_1_1_may_2017.pdf", NULL);
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/pdf"}, 1);
    assert_min_content_length(result, 100);
    assert_content_contains_any(result, (const char *[]){"Intel", "paging"}, 2);
    /* metadata assertion: format_type */
    if (result->metadata_json) { (void)str_contains_ci(result->metadata_json, "format_type"); (void)str_contains_ci(result->metadata_json, "{\"eq\":\"pdf\"}"); }
    kreuzberg_free_result(result);
}

static void test_pdf_pdf_right_to_left(void) {
    CExtractionResult *result = run_extraction("pdf/right_to_left_01.pdf", NULL);
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/pdf"}, 1);
    assert_min_content_length(result, 50);
    /* metadata assertion: format_type */
    if (result->metadata_json) { (void)str_contains_ci(result->metadata_json, "format_type"); (void)str_contains_ci(result->metadata_json, "{\"eq\":\"pdf\"}"); }
    kreuzberg_free_result(result);
}

static void test_pdf_pdf_simple_text(void) {
    CExtractionResult *result = run_extraction("pdf/fake_memo.pdf", NULL);
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/pdf"}, 1);
    assert_min_content_length(result, 50);
    assert_content_contains_any(result, (const char *[]){"May 5, 2023", "To Whom it May Concern", "Mallori"}, 3);
    kreuzberg_free_result(result);
}

static void test_pdf_pdf_tables_large(void) {
    CExtractionResult *result = run_extraction("pdf/large.pdf", NULL);
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/pdf"}, 1);
    assert_min_content_length(result, 500);
    kreuzberg_free_result(result);
}

static void test_pdf_pdf_tables_medium(void) {
    CExtractionResult *result = run_extraction("pdf/medium.pdf", NULL);
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/pdf"}, 1);
    assert_min_content_length(result, 100);
    kreuzberg_free_result(result);
}

static void test_pdf_pdf_tables_small(void) {
    if (skip_if_feature_unavailable("ocr")) return;
    CExtractionResult *result = run_extraction("pdf/tiny.pdf", NULL);
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/pdf"}, 1);
    assert_min_content_length(result, 50);
    assert_content_contains_all(result, (const char *[]){"Table 1", "Selected Numbers", "Celsius", "Fahrenheit", "Water Freezing Point", "Water Boiling Point"}, 6);
    assert_table_count(result, 1, 1, 0, 0);
    kreuzberg_free_result(result);
}

static void test_pdf_pdf_technical_stat_learning(void) {
    CExtractionResult *result = run_extraction("pdf/an_introduction_to_statistical_learning_with_applications_in_r_islr_sixth_printing.pdf", NULL);
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/pdf"}, 1);
    assert_min_content_length(result, 10000);
    assert_content_contains_any(result, (const char *[]){"statistical", "regression", "learning"}, 3);
    /* metadata assertion: format_type */
    if (result->metadata_json) { (void)str_contains_ci(result->metadata_json, "format_type"); (void)str_contains_ci(result->metadata_json, "{\"eq\":\"pdf\"}"); }
    kreuzberg_free_result(result);
}

int main(void) {
    test_pdf_pdf_annotations();
    test_pdf_pdf_assembly_technical();
    test_pdf_pdf_bayesian_data_analysis();
    test_pdf_pdf_bounding_boxes();
    test_pdf_pdf_code_and_formula();
    test_pdf_pdf_deep_learning();
    test_pdf_pdf_embedded_images();
    test_pdf_pdf_google_doc();
    test_pdf_pdf_large_ciml();
    test_pdf_pdf_non_english_german();
    test_pdf_pdf_right_to_left();
    test_pdf_pdf_simple_text();
    test_pdf_pdf_tables_large();
    test_pdf_pdf_tables_medium();
    test_pdf_pdf_tables_small();
    test_pdf_pdf_technical_stat_learning();
    printf("test_pdf: all tests passed\n");
    return 0;
}
