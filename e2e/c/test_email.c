/* Code generated by kreuzberg-e2e-generator. DO NOT EDIT. */
/* Category: email */

#include "helpers.h"
#include <stdio.h>

static void test_email_email_eml_html_body(void) {
    CExtractionResult *result = run_extraction("email/html_only.eml", NULL);
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"message/rfc822"}, 1);
    assert_min_content_length(result, 10);
    kreuzberg_free_result(result);
}

static void test_email_email_eml_multipart(void) {
    CExtractionResult *result = run_extraction("email/html_email_multipart.eml", NULL);
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"message/rfc822"}, 1);
    assert_min_content_length(result, 10);
    kreuzberg_free_result(result);
}

static void test_email_email_eml_utf16(void) {
    CExtractionResult *result = run_extraction("vendored/unstructured/eml/fake-email-utf-16.eml", NULL);
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"message/rfc822"}, 1);
    assert_min_content_length(result, 50);
    assert_content_contains_any(result, (const char *[]){"Test Email", "Roses are red"}, 2);
    kreuzberg_free_result(result);
}

static void test_email_email_msg_basic(void) {
    CExtractionResult *result = run_extraction("email/fake_email.msg", NULL);
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/vnd.ms-outlook"}, 1);
    assert_min_content_length(result, 10);
    kreuzberg_free_result(result);
}

static void test_email_email_sample_eml(void) {
    CExtractionResult *result = run_extraction("email/sample_email.eml", NULL);
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"message/rfc822"}, 1);
    assert_min_content_length(result, 20);
    kreuzberg_free_result(result);
}

int main(void) {
    test_email_email_eml_html_body();
    test_email_email_eml_multipart();
    test_email_email_eml_utf16();
    test_email_email_msg_basic();
    test_email_email_sample_eml();
    printf("test_email: all tests passed\n");
    return 0;
}
