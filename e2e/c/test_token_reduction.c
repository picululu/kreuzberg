/* Code generated by kreuzberg-e2e-generator. DO NOT EDIT. */
/* Category: token_reduction */

#include "helpers.h"
#include <stdio.h>

static void test_token_reduction_token_reduction_aggressive(void) {
    CExtractionResult *result = run_extraction("pdf/fake_memo.pdf", "{\"token_reduction\":{\"mode\":\"aggressive\"}}");
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/pdf"}, 1);
    assert_min_content_length(result, 5);
    assert_content_not_empty(result);
    kreuzberg_free_result(result);
}

static void test_token_reduction_token_reduction_basic(void) {
    CExtractionResult *result = run_extraction("pdf/fake_memo.pdf", "{\"token_reduction\":{\"mode\":\"moderate\"}}");
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/pdf"}, 1);
    assert_min_content_length(result, 5);
    assert_content_not_empty(result);
    kreuzberg_free_result(result);
}

static void test_token_reduction_token_reduction_light(void) {
    CExtractionResult *result = run_extraction("pdf/fake_memo.pdf", "{\"token_reduction\":{\"mode\":\"light\"}}");
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/pdf"}, 1);
    assert_min_content_length(result, 10);
    assert_content_not_empty(result);
    kreuzberg_free_result(result);
}

static void test_token_reduction_token_reduction_with_chunking(void) {
    CExtractionResult *result = run_extraction("pdf/fake_memo.pdf", "{\"chunking\":{\"max_chars\":500,\"max_overlap\":50},\"token_reduction\":{\"mode\":\"moderate\"}}");
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/pdf"}, 1);
    assert_min_content_length(result, 5);
    assert_content_not_empty(result);
    assert_chunks(result, 1, 1, 0, 0);
    kreuzberg_free_result(result);
}

int main(void) {
    test_token_reduction_token_reduction_aggressive();
    test_token_reduction_token_reduction_basic();
    test_token_reduction_token_reduction_light();
    test_token_reduction_token_reduction_with_chunking();
    printf("test_token_reduction: all tests passed\n");
    return 0;
}
