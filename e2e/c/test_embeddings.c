/* Code generated by kreuzberg-e2e-generator. DO NOT EDIT. */
/* Category: embeddings */

#include "helpers.h"
#include <stdio.h>

static void test_embeddings_embedding_async(void) {
    if (skip_if_feature_unavailable("embeddings")) return;
    CExtractionResult *result = run_extraction("pdf/fake_memo.pdf", "{\"chunking\":{\"embedding\":{\"model\":{\"name\":\"balanced\",\"type\":\"preset\"},\"normalize\":true},\"max_chars\":500,\"max_overlap\":50}}");
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/pdf"}, 1);
    assert_min_content_length(result, 10);
    assert_chunks(result, 1, 1, 0, 0);
    kreuzberg_free_result(result);
}

static void test_embeddings_embedding_balanced_preset(void) {
    if (skip_if_feature_unavailable("embeddings")) return;
    CExtractionResult *result = run_extraction("pdf/fake_memo.pdf", "{\"chunking\":{\"embedding\":{\"model\":{\"name\":\"balanced\",\"type\":\"preset\"},\"normalize\":true},\"max_chars\":500,\"max_overlap\":50}}");
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/pdf"}, 1);
    assert_min_content_length(result, 10);
    assert_chunks(result, 1, 1, 0, 0);
    kreuzberg_free_result(result);
}

static void test_embeddings_embedding_disabled(void) {
    CExtractionResult *result = run_extraction("pdf/fake_memo.pdf", "{\"chunking\":{\"max_chars\":500,\"max_overlap\":50}}");
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/pdf"}, 1);
    assert_min_content_length(result, 10);
    assert_chunks(result, 1, 1, 0, 0);
    kreuzberg_free_result(result);
}

static void test_embeddings_embedding_fast_preset(void) {
    if (skip_if_feature_unavailable("embeddings")) return;
    CExtractionResult *result = run_extraction("pdf/fake_memo.pdf", "{\"chunking\":{\"embedding\":{\"model\":{\"name\":\"fast\",\"type\":\"preset\"},\"normalize\":true},\"max_chars\":500,\"max_overlap\":50}}");
    if (!result) return; /* skipped */
    assert_expected_mime(result, (const char *[]){"application/pdf"}, 1);
    assert_min_content_length(result, 10);
    assert_chunks(result, 1, 1, 0, 0);
    kreuzberg_free_result(result);
}

int main(void) {
    test_embeddings_embedding_async();
    test_embeddings_embedding_balanced_preset();
    test_embeddings_embedding_disabled();
    test_embeddings_embedding_fast_preset();
    printf("test_embeddings: all tests passed\n");
    return 0;
}
