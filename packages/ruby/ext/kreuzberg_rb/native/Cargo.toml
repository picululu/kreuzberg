[workspace]

[workspace.dependencies]
bytes = { version = "1", features = ["serde"] }
serde = { version = "1.0.228", features = ["derive"] }
serde_json = { version = "1.0.149" }
tokio = { version = "1.49.0", features = [
    "rt",
    "rt-multi-thread",
    "macros",
    "sync",
    "process",
    "fs",
    "time",
    "io-util",
] }
thiserror = "2.0.18"
anyhow = "1.0"
libc = "0.2.182"
async-trait = "0.1.89"
tracing = "0.1"
ahash = "0.8.12"
base64 = "0.22.1"
hex = "0.4.3"
num_cpus = "1.17.0"
once_cell = "1.21.3"
parking_lot = "0.12.5"
html-to-markdown-rs = { version = "2.25.1", default-features = false }
reqwest = { version = "0.13.2", default-features = false }
image = { version = "0.25.9", default-features = false }
toml = "1.0.3"
tempfile = "3.26.0"
lzma-rust2 = { version = "0.16.2" }
log = "0.4"
getrandom = { version = "0.4.1", features = ["wasm_js"] }
console_error_panic_hook = "0.1"
ctor = "0.6"
lazy_static = "1.5.0"
rayon = "1.11.0"
chrono = "0.4"
itertools = "0.14"

[workspace.lints.clippy]
collapsible_if = "allow"

[package]
name = "kreuzberg-rb"
version = "4.3.8"
edition = "2024"
rust-version = "1.91"
authors = ["Na'aman Hirschfeld <nhirschfeld@gmail.com>"]
license = "MIT"
repository = "https://github.com/kreuzberg-dev/kreuzberg"
homepage = "https://kreuzberg.dev"
documentation = "https://docs.rs/kreuzberg"
readme = "README.md"
description = "Ruby bindings (Magnus) for Kreuzberg - high-performance document intelligence framework"
keywords = ["ruby", "magnus", "document", "extraction", "bindings"]
categories = ["api-bindings", "text-processing"]

[lints]
workspace = true

[lib]
name = "kreuzberg_rb"
crate-type = ["cdylib", "rlib"]

[features]
default = ["embeddings"]
embeddings = ["kreuzberg/embeddings"]

[dependencies]
async-trait = "0.1.89"
kreuzberg = { path = "../../../vendor/kreuzberg", default-features = false, features = [
    "pdf",
    "excel",
    "office",
    "email",
    "html",
    "xml",
    "archives",
    "ocr",
    "language-detection",
    "chunking",
    "embeddings",
    "quality",
    "keywords",
    "api",
    "mcp",
    "otel",
    "bundled-pdfium",
    "tokio-runtime",
] }
kreuzberg-ffi = { path = "../../../vendor/kreuzberg-ffi" }
magnus = { git = "https://github.com/matsadler/magnus", rev = "f6db11769efb517427bf7f121f9c32e18b059b38", features = [
    "rb-sys",
] }
rb-sys = { version = "0.9.124", default-features = false, features = [
    "stable-api-compiled-fallback",
] }
serde_json = "1.0.149"
toml = "1.0.3"
serde_yaml_ng = "0.10"
tokio = { version = "1.49.0", features = [
    "rt",
    "rt-multi-thread",
    "macros",
    "sync",
    "process",
    "fs",
    "time",
    "io-util",
] }
html-to-markdown-rs = { version = "2.25.1", default-features = false }

[dev-dependencies]
pretty_assertions = "1.4"

[package.metadata.cargo-machete]
ignored = ["rb-sys"]
